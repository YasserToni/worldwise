import{r as a,R as y,a as A,u as D,b as $,j as i,B as Y,c as O,N as E,O as B,d as U}from"./index-8671f250.js";import{l as g}from"./leaflet-src-19e8dd31.js";import{L as V}from"./Logo-7ad6394b.js";const Z="_mapContainer_1mfx8_1",G="_map_1mfx8_1",_={mapContainer:Z,map:G};function P(t,n){const e=a.useRef(n);a.useEffect(function(){n!==e.current&&t.attributionControl!=null&&(e.current!=null&&t.attributionControl.removeAttribution(e.current),n!=null&&t.attributionControl.addAttribution(n)),e.current=n},[t,n])}const W=1;function F(t){return Object.freeze({__version:W,map:t})}function X(t,n){return Object.freeze({...t,...n})}const R=a.createContext(null),w=R.Provider;function L(){const t=a.useContext(R);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function q(t){function n(e,o){const{instance:r,context:s}=t(e).current;return a.useImperativeHandle(o,()=>r),e.children==null?null:y.createElement(w,{value:s},e.children)}return a.forwardRef(n)}function J(t){function n(e,o){const[r,s]=a.useState(!1),{instance:u}=t(e,s).current;a.useImperativeHandle(o,()=>u),a.useEffect(function(){r&&u.update()},[u,r,e.children]);const l=u._contentNode;return l?A.createPortal(e.children,l):null}return a.forwardRef(n)}function K(t){function n(e,o){const{instance:r}=t(e).current;return a.useImperativeHandle(o,()=>r),null}return a.forwardRef(n)}function N(t,n){const e=a.useRef();a.useEffect(function(){return n!=null&&t.instance.on(n),e.current=n,function(){e.current!=null&&t.instance.off(e.current),e.current=null}},[t,n])}function x(t,n){const e=t.pane??n.pane;return e?{...t,pane:e}:t}function Q(t,n){return function(o,r){const s=L(),u=t(x(o,s),s);return P(s.map,o.attribution),N(u.current,o.eventHandlers),n(u.current,s,o,r),u}}function h(t,n,e){return Object.freeze({instance:t,context:n,container:e})}function j(t,n){return n==null?function(o,r){const s=a.useRef();return s.current||(s.current=t(o,r)),s}:function(o,r){const s=a.useRef();s.current||(s.current=t(o,r));const u=a.useRef(o),{instance:l}=s.current;return a.useEffect(function(){u.current!==o&&(n(l,o,u.current),u.current=o)},[l,o,r]),s}}function ee(t,n){a.useEffect(function(){return(n.layerContainer??n.map).addLayer(t.instance),function(){var s;(s=n.layerContainer)==null||s.removeLayer(t.instance),n.map.removeLayer(t.instance)}},[n,t])}function I(t){return function(e){const o=L(),r=t(x(e,o),o);return P(o.map,e.attribution),N(r.current,e.eventHandlers),ee(r.current,o),r}}function ne(t,n){const e=j(t,n),o=I(e);return q(o)}function te(t,n){const e=j(t),o=Q(e,n);return J(o)}function oe(t,n){const e=j(t,n),o=I(e);return K(o)}function re(t,n,e){const{opacity:o,zIndex:r}=n;o!=null&&o!==e.opacity&&t.setOpacity(o),r!=null&&r!==e.zIndex&&t.setZIndex(r)}function M(){return L().map}function ae(t,n){const e=M();return a.useEffect(function(){return e.on(t,n),function(){e.off(t,n)}},[e,t,n]),e}function C(){return C=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},C.apply(this,arguments)}function ie({bounds:t,boundsOptions:n,center:e,children:o,className:r,id:s,placeholder:u,style:l,whenReady:c,zoom:p,...d},S){const[H]=a.useState({className:r,id:s,style:l}),[f,z]=a.useState(null);a.useImperativeHandle(S,()=>(f==null?void 0:f.map)??null,[f]);const T=a.useCallback(b=>{if(b!==null&&f===null){const m=new g.Map(b,d);e!=null&&p!=null?m.setView(e,p):t!=null&&m.fitBounds(t,n),c!=null&&m.whenReady(c),z(F(m))}},[]);a.useEffect(()=>()=>{f==null||f.map.remove()},[f]);const k=f?y.createElement(w,{value:f},o):u??null;return y.createElement("div",C({},H,{ref:T}),k)}const se=a.forwardRef(ie),ue=ne(function({position:n,...e},o){const r=new g.Marker(n,e);return h(r,X(o,{overlayContainer:r}))},function(n,e,o){e.position!==o.position&&n.setLatLng(e.position),e.icon!=null&&e.icon!==o.icon&&n.setIcon(e.icon),e.zIndexOffset!=null&&e.zIndexOffset!==o.zIndexOffset&&n.setZIndexOffset(e.zIndexOffset),e.opacity!=null&&e.opacity!==o.opacity&&n.setOpacity(e.opacity),n.dragging!=null&&e.draggable!==o.draggable&&(e.draggable===!0?n.dragging.enable():n.dragging.disable())}),ce=te(function(n,e){const o=new g.Popup(n,e.overlayContainer);return h(o,e)},function(n,e,{position:o},r){a.useEffect(function(){const{instance:u}=n;function l(p){p.popup===u&&(u.update(),r(!0))}function c(p){p.popup===u&&r(!1)}return e.map.on({popupopen:l,popupclose:c}),e.overlayContainer==null?(o!=null&&u.setLatLng(o),u.openOn(e.map)):e.overlayContainer.bindPopup(u),function(){var d;e.map.off({popupopen:l,popupclose:c}),(d=e.overlayContainer)==null||d.unbindPopup(),e.map.removeLayer(u)}},[n,e,r,o])}),le=oe(function({url:n,...e},o){const r=new g.TileLayer(n,x(e,o));return h(r,o)},function(n,e,o){re(n,e,o);const{url:r}=e;r!=null&&r!==o.url&&n.setUrl(r)});function fe(t=null){const[n,e]=a.useState(!1),[o,r]=a.useState(t),[s,u]=a.useState(null);function l(){if(!navigator.geolocation)return u("Your browser does not support geolocation");e(!0),navigator.geolocation.getCurrentPosition(c=>{r({lat:c.coords.latitude,lng:c.coords.longitude}),e(!1)},c=>{u(c.message),e(!1)})}return{isLoading:n,position:o,error:s,getPosition:l}}function de(){const[t,n]=D(),e=t.get("lat"),o=t.get("lng"),[r,s]=a.useState([40,0]),{cities:u}=$(),{isLoading:l,position:c,getPosition:p}=fe();return a.useEffect(function(){e&&o&&s([e,o])},[e,o]),a.useEffect(function(){c&&s([c.lat,c.lng])},[c]),i.jsxs("div",{className:_.mapContainer,children:[!c&&i.jsx(Y,{type:"position",onClick:p,children:l?"Loading":"Use Your Location"}),i.jsxs(se,{center:r,zoom:13,scrollWheelZoom:!0,className:_.map,children:[i.jsx(le,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png"}),u.map(d=>i.jsx(ue,{position:[d.position.lat,d.position.lng],children:i.jsxs(ce,{children:[i.jsx("span",{children:d.emoji}),i.jsx("span",{children:d.cityName})]})},d.id)),i.jsx(pe,{position:r}),i.jsx(me,{})]})]})}function pe({position:t}){return M().setView(t),null}function me(){const t=O();ae({click:n=>{console.log(n),t(`form?lat=${n.latlng.lat}&lng=${n.latlng.lng}`)}})}const ge="_nav_89j0t_1",ve={nav:ge};function ye(){return i.jsx("nav",{className:ve.nav,children:i.jsxs("ul",{children:[i.jsx("li",{children:i.jsx(E,{to:"cities",children:"citites"})}),i.jsx("li",{children:i.jsx(E,{to:"countries",children:"countries"})})]})})}const Ce="_sidebar_1cb67_1",Le="_footer_1cb67_12",xe="_copyright_1cb67_16",v={sidebar:Ce,footer:Le,copyright:xe};function he(){return i.jsxs("div",{className:v.sidebar,children:[i.jsx(V,{}),i.jsx(ye,{}),i.jsx(B,{}),i.jsx("footer",{className:v.footer,children:i.jsxs("p",{className:v.copyright,children:["© Copyright ",new Date().getFullYear()," by Yasser Toni"]})})]})}const je="_user_ofm1r_1",be={user:je};function Ee(){const{user:t,logout:n}=U(),e=O();function o(){n(),e("/")}return i.jsxs("div",{className:be.user,children:[i.jsx("img",{src:t.avatar,alt:t.name}),i.jsxs("span",{children:["Welcome, ",t.name]}),i.jsx("button",{onClick:o,children:"Logout"})]})}const _e="_app_1asv8_1",Oe={app:_e};function Ne(){return i.jsxs("div",{className:Oe.app,children:[i.jsx(he,{}),i.jsx(de,{}),i.jsx(Ee,{})]})}export{Ne as default};
